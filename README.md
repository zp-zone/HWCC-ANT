# HWCC-ANT  

华为2016软件精英挑战赛，初赛蚁群算法  
可以解决所有用例，保证解是在最优解的1.1倍以内，特殊用例比如边比较少的用例是1.2倍  

## 蚁群算法思路  

1) 不考虑路径的权重，只考虑信息素以快速的找到解。信息素的初始化也是很简单粗暴：和必经点相连的边初始化为3，次相连的边是2，再次相连的边初始化为1，其他边不考虑。  

2) 采用双向蚂蚁，一种从起点到终点，一种从终点到起点。路径评价标准是经过必经点越多越好，其中从起点到终点方向的蚂蚁至少需要经过必经点的一半，从终点到起点的蚂蚁至少要经过必经点的三分之一(测试出来的，前者大多走到一半就挂了，后者只能走三分之一)。  

3) 采用精英蚂蚁的思路，每一轮寻找之后找出第一类蚂蚁中经过节点数超过阈值一(初始为必经结点数的二分之一)，且经过节点数最多的蚂蚁，让其留下信息素。另外一个方向的蚂蚁也是经过必经节点数超过阈值二(初始为三分之一必经节点数)且最多的蚂蚁留下信息素。所以蚁群的一次迭代可以最多有两只蚂蚁可以留下信息素，最少是一只也没有。一次迭代之后找出两个方向中蚂蚁经过的必经结点个数最大值作为新的阈值，后续的迭代中，蚂蚁经过的必经结点数必须超过这个更新后的阈值，而不再是二分之一或者三分之一。这样可以快速的将阈值推进到等于必经结点个数，此时也就找到了一个解。  

4) 每次的迭代中被选中更新信息素的蚂蚁留下的信息素等于其经过必经结点个数的两倍除以必经结点个数，这样信息素最少增加1最多增加2，或者没有找到路径，就不增加

## 结果优化  
接下来就该考虑如何将这个初始解优化到最优解或者优化到最优解的1.1倍以内。当然做法是dijk的迭代优化，再来一次更加激进的优化。    
### 迭代的优化思路（迭代优化是一定可以得到一条更优路径的）：  
1) 以当前路径中必经结点顺序依次优化每一段子路径，直到优化完成；  

2) 如果当前可以优化而且求出了一条更优的子路径，那么继续循环，直到出现一次优化无法再找到一条更优的路径为止。  

3) 一般这种迭代会持续最少两次，大多数是迭代3次就无法再优化了。但是优点就是可以将解优化到最优解的1.5倍以内而且时间也是ms级别的，基本可以看做没花什么时间   

### 激进的优化策略（激进优化可能出现无法找到更优路径的情形）：
1) 之所以叫做激进是因为此时的优化只取已经求出的路径的必经结点顺序，然后将图中所有点标记为未访问。按必经点顺序依次求子路径最短，最终到达目标点或者出现由于非必经结点占用导致的无法求出某一个子路径为止  

2) 这种优化成功率是一半一半，有些图比如边很多的，就 可以用激进的优化策略得到一条更加理想的路径，但是对于边很少但是必经点比较多的时候一半难以找到一条新的更优的路径.  
